/*! jquery-key - a keypress and combo plugin - v0.1.0 - 2013-01-21
* https://github.com/danheberden/jquery-key
* Copyright (c) 2013 Dan Heberden; Licensed MIT */
(function(e){var t=function(e,t){var n=this,a=e.keyCode||e.which,i=+new Date,o="";if(!(a>15&&19>a||20===a||91===a||!t.options.bubbleInputs&&n!==e.target&&("true"===n.contentEditable||/(SEL|XTA|NP)/i.test(e.target.nodeName))))if(e.altKey&&(o+="a"),e.ctrlKey&&(o+="c"),e.metaKey&&(o+="m"),e.shiftKey&&(o+="s"),o+=a,"keyup"===e.type)t.state[o]=!1;else{t.state[o]=!0,i-t.lastKeyTime>t.options.time&&(t.keyLog=[]),t.lastKeyTime=i,9===a&&t.options.holdTab&&e.preventDefault(),t.actions["*"]&&t.actions["*"].call(n,e,t,o),t.keyLog.unshift(o),t.keyLog.length>t.maxLength&&(t.keyLog.length=t.maxLength);for(var l=0;t.keyLog.length>l;l++){for(var c=t.keyLog.length-1-l,s=[];c>=0;c--)s.push(t.keyLog[c]);s=s.join(","),t.actions[s]&&t.actions[s].call(n,e,t,s)}}},n={time:2e3,bubbleInputs:!1,holdTab:!1},a=function(a,i,o){var l,c=e(this),s=c.data()||{},h=a.split(",").length;return s._key_cache||(s._key_cache={actions:{},handler:void 0,keyLog:[],maxLength:0,lastKeyTime:0,state:{},options:e.extend({},n)}),l=s._key_cache,e.extend(l.options,o),l.actions[a]=i,h>l.maxLength&&(l.maxLength=h),l.handler||(l.handler=function(e){t.call(c[0],e,l)},c.keydown(l.handler),c.keyup(l.handler)),this},i=function(e,t,n){var i,o=e;/C/.test(e)&&(o=e.replace("/C/g","c"),i=e.replace("/C/g","m")),a.call(this,o,t,n),i&&a.call(this,i,t,n)},o=function(){var t=e('<input style="width:100%;border:1px solid #CCC;font-size:1.3em;">'),n=e("<div>"),a=e("<button>CLEAR</button>"),i=e('<div style="position:absolute;top:0;left:0;width:100%;z-index:9001;background:#000;color:#FFF;font-size:1.3em;">').append(t,a,n);t.key("*",function(e,t,a){var i=n.html();n.html(i+(i.length?",":"")+a)},{keepTabInInput:!0}),a.bind("click",function(){n.html(""),t.val("")}),e(document.body).append(i)};e.fn.key=function(t,n,a){if("help"===t)return o(),!1;if("data"===t)return this.data("_key_cache");var l=this;if("object"!==e.type(t)){var c={};c[t]=n,t=c}else a=n;return e.each(t,function(e,t){i.call(l,e,t,a)}),this}})(jQuery);